(executable
 (public_name morpion)
 (name morpion_bin)
 (modules morpion_bin)
 (libraries morpion gamelle.sdl))

(executable
 (name morpion_js)
 (modules morpion_js)
 (modes js)
 (libraries morpion gamelle.jsoo))

(rule
 (target index.html)
 (deps index.html.template morpion_js.bc.js)
 (action
  (with-stdout-to
   index.html
   (run
    %{bin:gamelle}
    html
    --template=index.html.template
    --script=morpion_js.bc.js))))
